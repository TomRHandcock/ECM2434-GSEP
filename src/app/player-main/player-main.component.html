<!-- The navigations bar (Author: George White) -->
<nav class="navbar is-fixed-top" role="navigation">
  <div class="navbar-brand">
    <div class="navbar-item">
      <span class="navbar-header">{{this.teamData.name}}</span>
    </div>
    <a class="navbar-burger" role="button" aria-label="Toggle navigation" (click)="showMenu = !showMenu">
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
      <span aria-hidden="true"></span>
    </a>
  </div>
  <div class="navbar-menu" [ngClass]="showMenu? 'is-active' : ''">
    <div class="navbar-end">
      <a class="navbar-item" *ngIf="this.isAGamemaster;" style="color:green" (click)="this.goToGamemaster();">Gamemaster Control</a>
      <a class="navbar-item" (click)="this.screen = this.screens.PROGRESS; showMenu = false">Our Progress</a>
      <a class="navbar-item" style="color:red">I'm Lost</a>
      <a class="navbar-item" style="color:red">Help and Support</a>
      <a class="navbar-item" style="color:red">Settings</a>
      <a class="navbar-item" (click)="signOut()">Sign out</a>
    </div>
  </div>
</nav>

<br><br>

<ng-container [ngSwitch]="this.screen">
   <!-- The home screen -->
  <main *ngSwitchCase="this.screens.PROGRESS" class="container progress-container has-navbar-fixed-top">
    <!-- The title section -->
    <div class="columns">
      <div class="column is-full">
        <h1 class="title is-1">Your Current Progress</h1>
      </div>
    </div>
    <!-- The table of entries -->
    <div class="columns">
      <table class="table column is-full flex-grow">
        <tbody>
          <tr>
            <td class="row-heading">Score</td>
            <td class="row-value">{{this.teamData.score}}</td>
          </tr>

          <!-- Some example entries that we may choose to implement -->
          <tr>
            <td class="row-heading">Locations Complete</td>
            <td class="row-value">{{this.teamData.locationsCompleted}}</td>
          </tr>
          <tr>
            <td class="row-heading">Hints Used</td>
            <td class="row-value">{{this.teamData.hintsUsed}}</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- A button to return back to the home screen -->
    <div role="button" class="is-primary button" id="progressBack" (click)="this.screen = this.screens.HOME">
      <span class="icon is-small">
        <fa-icon [icon]="homeIcon"></fa-icon>
      </span>
      <span>Back to Home</span>
    </div>
  </main>

  <!-- The QR screen (Author: AlexWesterman) -->
  <main *ngSwitchCase="this.screens.QR_SCANNER" class="container qrScanner-container has-navbar-fixed-top">
   <!-- A button to open the user's camera -->
    <button (click)="openCamera()" class="button is-primary">
      <span class="icon is-small">
        <fa-icon [icon]="scanQrCodeIcon"></fa-icon>
      </span>
      <span>Open Camera</span>
    </button>

    <!-- The actual QR scanner component -->
    <qr-scanner id="QrScanner"
      [debug]="false"
      [canvasWidth]="1080"
      [canvasHeight]="720"
      [stopAfterScan]="true"
      [updateTime]="500">
    </qr-scanner>

    <!-- A button to return to the home view -->
    <div role="button" class="is-primary button" id="qrScannerBack" (click)="this.screen = this.screens.HOME">
      <span class="icon is-small">
        <fa-icon [icon]="homeIcon"></fa-icon>
      </span>
      <span>Back to Home</span>
    </div>
  </main>

  <!-- The answer screen (Author: AlexWesterman, TomRHandcock) -->
  <main *ngSwitchCase="this.screens.ANSWER_QS" class="container has-navbar-fixed-top">
    <h2 id="questionLabel" class="is-primary subtitle is-2">{{this.currQuestion.question}}</h2>
    <form id="question" (change)="this.verifyAnswer()" [formGroup]="answerForm">
      <div class="questionAnswer" [ngClass]="this.correctAnswer == 0 ? 'correctAnswer' : ''">
        <label for="a1-a">A. </label>
        <input type="radio" id="a1-a" formControlName="answer" value="0">
        <label for="a1-a">{{this.currQuestion.answers[0]}}</label>
      </div>

      <div class="questionAnswer" [ngClass]="this.correctAnswer == 1 ? 'correctAnswer' : ''">
        <label for="a2-a">B. </label>
        <input type="radio" id="a2-a" formControlName="answer" value="1">
        <label for="a1-a">{{this.currQuestion.answers[1]}}</label>
      </div>

      <div class="questionAnswer" [ngClass]="this.correctAnswer == 2 ? 'correctAnswer' : ''">
        <label for="a3-a">C. </label>
        <input type="radio" id="a3-a"  formControlName="answer" value="2">
        <label for="a1-a">{{this.currQuestion.answers[2]}}</label>
      </div>

      <div class="questionAnswer" [ngClass]="this.correctAnswer == 3 ? 'correctAnswer' : ''">
        <label for="a4-a">D. </label>
        <input type="radio" id="a4-a" formControlName="answer" value="3">
        <label for="a1-a">{{this.currQuestion.answers[3]}}</label>
      </div>
    </form>
    <button class="is-primary button" (click)="this.nextQuestion()">Next Question</button>
  </main>

  <!-- The answering screen (Author: AlexWesterman) -->
  <main *ngSwitchCase="this.screens.HOME" class="container home-container has-navbar-fixed-top">
    <!-- The map -->
    <section class="element" id="mapSection">
    </section>
    <!-- The description of the next location -->
    <section class="element" id="clueSection">
      <h4 class="subtitle is-4 is-marginless next-location">Next Location: {{this.currTarget.location}}</h4>
      <div class="next-info">
        <br>
        {{this.currTarget.description}}
        <!-- Only show if hint is unlocked -->
        <div class="next-loc-info" *ngIf="this.currTarget.showHint">
          <br>
          <b>Hint:
          {{this.currTarget.hint}}</b>
        </div>
      </div>
      <button class="goto-questions" (click)="this.beingAnswering()">Answer Questions</button>
    </section>

    <!-- The QR camera opener (Author: OGWSaunders) -->
    <button (click)="this.screen = this.screens.QR_SCANNER" class="button is-primary">
      <span class="icon is-small">
        <fa-icon [icon]="scanQrCodeIcon"></fa-icon>
      </span>
      <span>Scan QR code</span>
    </button>

    <!-- The bottom buttons (Author: AlexWesterman) -->
    <div class="button-bar" id="playerButtonBar">
      <button (click)="this.showHint();" class="button is-primary">
        <span>Request Hint</span>
      </button>
      <button (click)="openUniWebsite()" class="button is-primary">
        <span class="icon is-small">
          <fa-icon [icon]="visitWebsiteIcon"></fa-icon>
        </span>
        <span>UoE Website</span>
      </button>
    </div>
  </main>
</ng-container>
